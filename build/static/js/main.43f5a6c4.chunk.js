(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(42)},40:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),i=n.n(o),l=n(11),u=n(12),c=n(14),s=n(13),m=n(15),f=function(e){var t=e.filter,n=e.handleFilterChange;return r.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4: ",r.a.createElement("input",{value:t,onChange:n}))},d=function(e){var t=e.person,n=e.deletePerson;return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:n},"poista")))},h=function(e){var t=e.handleForm,n=e.newName,a=e.newNumber,o=e.handleNameChange,i=e.handleNumberChange;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:n,onChange:o})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:a,onChange:i})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},p=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"notification"},t)},w=n(2),v=n.n(w),g="/api/persons",N={getAll:function(){return v.a.get(g).then(function(e){return e.data})},create:function(e){return v.a.post(g,e).then(function(e){return e.data})},deleteId:function(e){return v.a.delete("".concat(g,"/").concat(e)).then(function(e){return e})},update:function(e,t){return v.a.put("".concat(g,"/").concat(t),e).then(function(e){return e.data})}},b=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(s.a)(t).call(this))).handleNameChange=function(t){e.setState({newName:t.target.value})},e.handleNumberChange=function(t){e.setState({newNumber:t.target.value})},e.handleFilterChange=function(t){e.setState({filter:t.target.value})},e.updatePerson=function(t){var n=e.state.persons.find(function(t){return t.name===e.state.newName}).id;window.confirm("".concat(e.state.newName," on jo luettelossa, korvataanko vanha numero uudella?"))&&N.update(t,n).then(function(t){var n=e.state.persons.filter(function(e){return e.id!==t.id});e.setState({persons:n.concat(t),newName:"",newNumber:"",notification:"Muutettiin henkil\xf6n ".concat(t.name," numero")}),setTimeout(function(){e.setState({notification:null})},3e3)}).catch(function(a){var r=e.state.persons.filter(function(e){return e.id!==n});e.addPerson(t,r,"Uudelleenlis\xe4ttiin henkil\xf6 ".concat(t.name))})},e.addPerson=function(t,n,a){N.create(t).then(function(t){e.setState({persons:n.concat(t),newName:"",newNumber:"",notification:a}),setTimeout(function(){e.setState({notification:null})},3e3)}).catch(function(e){console.log("Could not retrieve persons from server")})},e.handlePersonForm=function(t){t.preventDefault();var n={name:e.state.newName,number:e.state.newNumber};if(e.state.persons.some(function(t){return t.name===e.state.newName}))return e.updatePerson(n);e.addPerson(n,e.state.persons,"Lis\xe4ttiin henkil\xf6 ".concat(n.name))},e.deletePerson=function(t){return function(){window.confirm("Poistetaanko ".concat(t.name,"?"))&&N.deleteId(t.id).then(function(n){e.setState({persons:e.state.persons.filter(function(e){return e.id!==t.id}),notification:"Poistettiin henkil\xf6 ".concat(t.name)}),setTimeout(function(){e.setState({notification:null})},3e3)}).catch(function(e){console.log("Something went wrong while trying to delete person information")})}},e.state={persons:[],newName:"",newNumber:"",filter:"",notification:null},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.getAll().then(function(t){e.setState({persons:t})})}},{key:"render",value:function(){var e=this,t=this.state.persons.filter(function(t){return t.name.toLowerCase().includes(e.state.filter.toLowerCase())}),n=""===this.state.filter?this.state.persons:t;return r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(p,{message:this.state.notification}),r.a.createElement(f,{filter:this.state.filter,handleFilterChange:this.handleFilterChange}),r.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),r.a.createElement(h,{handleForm:this.handlePersonForm,newName:this.state.newName,newNumber:this.state.newNumber,handleNameChange:this.handleNameChange,handleNumberChange:this.handleNumberChange}),r.a.createElement("h2",null,"Numerot"),r.a.createElement("table",null,r.a.createElement("tbody",null,n.map(function(t){return r.a.createElement(d,{key:t.id,person:t,deletePerson:e.deletePerson(t)})}))))}}]),t}(r.a.Component);n(40);i.a.render(r.a.createElement(b,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.43f5a6c4.chunk.js.map